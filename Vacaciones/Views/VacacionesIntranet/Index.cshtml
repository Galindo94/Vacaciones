<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <script type="text/javascript">
        $(document).ready(function () {
            $("#btnIngresarVacacionesIntranet").click(function () {
                $.post("../VacacionesIntranet/ConsultarUserDA", { NombreUsuario: "@ViewBag.UsuarioIntranet" }, function (RespuestaDA) {
                    switch (RespuestaDA.Codigo) {
                        case "0":
                            $.post("../VacacionesIntranet/ConsultarUserSAP", { UserDA: JSON.stringify(RespuestaDA.Resultado.Data) }, function (RespuestaSAP) {
                                switch (RespuestaSAP.Codigo) {

                                    case "0":
                                        //LLamar motor de reglas para validar reglas y escenarios
                                        $.post("../VacacionesIntranet/ConsultaMotorDeReglas", { RespuestaSAP: JSON.stringify(RespuestaSAP.Resultado.Data) }, function (RespuestaMotorReglas) {
                                            switch (RespuestaMotorReglas.Codigo) {

                                                case "0":
                                                    //TO DO
                                                    //LLamar motor de reglas para validar reglas y escenarios
                                                    break;


                                                case "-1":
                                                    swal.fire({
                                                        title: "Error!",
                                                        text: RespuestaDA.Mensaje,
                                                        type: 'error',
                                                        confirmButtonText: "OK",
                                                        confirmButtonColor: '#00AFF0',
                                                        allowOutsideClick: false,
                                                        allowEscapeKey: false
                                                    });
                                                    break;


                                                case "-2":
                                                    swal.fire({
                                                        title: "Error!",
                                                        text: RespuestaDA.Mensaje,
                                                        type: 'error',
                                                        confirmButtonText: "OK",
                                                        confirmButtonColor: '#00AFF0',
                                                        allowOutsideClick: false,
                                                        allowEscapeKey: false
                                                    });
                                                    break;

                                                case "-3":
                                                    swal.fire({
                                                        title: "Error!",
                                                        text: RespuestaDA.Mensaje,
                                                        type: 'error',
                                                        confirmButtonText: "OK",
                                                        confirmButtonColor: '#00AFF0',
                                                        allowOutsideClick: false,
                                                        allowEscapeKey: false
                                                    });
                                                    break;
                                            }
                                        });
                                        break;


                                    case "-1":
                                        swal.fire({
                                            title: "Error!",
                                            text: RespuestaDA.Mensaje,
                                            type: 'error',
                                            confirmButtonText: "OK",
                                            confirmButtonColor: '#00AFF0',
                                            allowOutsideClick: false,
                                            allowEscapeKey: false
                                        });
                                        break;


                                    case "-2":
                                        swal.fire({
                                            title: "Error!",
                                            text: RespuestaDA.Mensaje,
                                            type: 'error',
                                            confirmButtonText: "OK",
                                            confirmButtonColor: '#00AFF0',
                                            allowOutsideClick: false,
                                            allowEscapeKey: false
                                        });
                                        break;

                                    case "-3":
                                        swal.fire({
                                            title: "Error!",
                                            text: RespuestaDA.Mensaje,
                                            type: 'error',
                                            confirmButtonText: "OK",
                                            confirmButtonColor: '#00AFF0',
                                            allowOutsideClick: false,
                                            allowEscapeKey: false
                                        });
                                        break;
                                }
                            });
                            break;

                         //El usuario no existe en el DA
                        case "-1":
                            swal.fire({
                                title: "Error!",
                                text: RespuestaDA.Mensaje,
                                type: 'error',
                                confirmButtonText: "OK",
                                confirmButtonColor: '#00AFF0',
                                allowOutsideClick: false,
                                allowEscapeKey: false
                            }).then((result) => {
                                if (result.value) {
                                    var url = "@Url.Action("Index", "Home", null)";
                                    window.location.href = url
                                }
                            });
                            break;
                         // El usuario no se encontro en el DA
                        case "-2":
                            swal.fire({
                                title: "Advertencia!",
                                text: RespuestaDA.Mensaje,
                                type: 'warning',
                                confirmButtonText: "OK",
                                confirmButtonColor: '#00AFF0',
                                allowOutsideClick: false,
                                allowEscapeKey: false
                            }).then((result) => {
                                if (result.value) {
                                    var url = "@Url.Action("Index", "Home", null)";
                                    window.location.href = url
                                }
                            });
                            break;
                        // Error en el Servicio del DA
                        case "-3":
                            swal.fire({
                                title: "Error!",
                                text: RespuestaDA.Mensaje,
                                type: 'error',
                                confirmButtonText: "OK",
                                confirmButtonColor: '#00AFF0',
                                allowOutsideClick: false,
                                allowEscapeKey: false
                            });
                            break;

                        // Error en el Servicio del DA
                        case "-4":
                            swal.fire({
                                title: "Error!",
                                text: RespuestaDA.Mensaje,
                                type: 'error',
                                confirmButtonText: "OK",
                                confirmButtonColor: '#00AFF0',
                                allowOutsideClick: false,
                                allowEscapeKey: false
                            }).then((result) => {
                                if (result.value) {
                                    var url = "@Url.Action("Index", "Home", null)";
                                    window.location.href = url
                                }
                                });
                            break;
                    }
                });
            });
        });
    </script>

</head>
<body>


    <div class="jumbotron">
        <div class="jumbotron-cuerpo">
            <div class="container body-content">
                <h1 class="jumbotron-encabezado center">VACACIONES APP</h1>
                <div class="col-md-12 center">
                    <label class="fieldlist-label">Bienvenido (a) @ViewBag.UsuarioIntranet</label>
                    <button id="btnIngresarVacacionesIntranet" class="btn btn-lg btn-primary">Presione aqui para ingresar</button>
                </div>
            </div>
        </div>
    </div>


</body>

</html>
